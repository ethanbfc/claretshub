{% extends 'base.html' %}
{% load static %}

{% block title %}{{ article.title }}{% endblock %}

{% block head %}

<!-- CSS -->
<link rel="stylesheet" type="text/css" href="{% static 'css/article.css' %}">

{% endblock %}

{% block content %}

<div class="container p-3 m-0 border-0 main-container">
    <div class="row">
        <!-- Left Column -->
        <div class="col-3 mobile-hide">
            <!-- Admin Commands -->
            {% if user.id == article.author.id %}
                <div class="card">
                    <div class="card-header">Admin Commands</div>
                    <div class="card-body admin-card-body">
                        <a class="btn btn-primary" role="button" href="{% url 'edit-article' article.pk %}">Edit Article Body</a>
                        {% if article.category.title == "Match Report" %}
                            <a class="btn btn-primary" role="button" href="{% url 'edit-match-report' article.match_report.id %}">Edit Match Report</a>
                        {% endif %}
                        {% if article.category.title == "Player Profile" %}
                            <a class="btn btn-primary" role="button" href="{% url 'edit-player-profile' article.player_profile.id %}">Edit Player Profile</a>
                        {% endif %}
                        <a class="btn btn-primary" role="button" href="{% url 'delete-article' article.pk %}">Delete Article</a>
                    </div>
                </div>
                </br>
            {% endif %}

            <!-- Latest Articles -->
            <div class="card">
                <div class="card-header">Latest Articles</div>
                <div class="card-body">
                    <p>body</p>
                </div>
            </div>
        </div>
        <!-- Article -->
        <div class="col-6 article-col">
            <div class="container article-container">
                <!-- Title and Subtext -->
                <h1 class="article-title">{{ article.title }}</h1>

                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
                    <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                </svg>
                <small class="text-muted">{{ article.author }}</small>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar" viewBox="0 0 16 16">
                    <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                </svg>
                <small class="text-muted">{{ article.date | date:'dS F o' }}</small>

                <!-- Match Report -->
                {% if article.category.title == "Match Report" %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo-alt-fill" viewBox="0 0 16 16">
                        <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                    </svg>
                    <small class="text-muted">{{ article.match_report.stadium }}</small>

                    <hr>
                    <p>{{ article.body | safe }}</p>

                    <hr>
                    <div class="row">
                        <div class="col">
                            <b>Burnley</b>: {{ article.match_report.burnley_team | safe }}
                        </div>
                        <div class="col">
                            <b>{{ article.match_report.opponent }}</b>: {{ article.match_report.opponent_team | safe }}
                        </div>
                    </div>

                    <p><b>Goals</b>: {{ article.match_report.goals }}</p>

                    <table class="table table-bordered">
                        <thead class="table-dark">
                        <tr>
                            <th scope="col">Statistics</th>
                            <th scope="col">Burnley</th>
                            <th scope="col">{{ article.match_report.opponent }}</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <th scope="row">Possession</th>
                            <td>{{ article.match_report.possession_burnley }}%</td>
                            <td>{{ article.match_report.possession_opponent }}%</td>
                        </tr>
                        <tr>
                            <th scope="row">Shots</th>
                            <td>{{ article.match_report.shots_burnley }}</td>
                            <td>{{ article.match_report.shots_opponent }}</td>
                        </tr>
                        <tr>
                            <th scope="row">Shots on Target</th>
                            <td>{{ article.match_report.shots_on_target_burnley }}</td>
                            <td>{{ article.match_report.shots_on_target_opponent }}</td>
                        </tr>
                        <tr>
                            <th scope="row">Corners</th>
                            <td>{{ article.match_report.corners_burnley }}</td>
                            <td>{{ article.match_report.corners_opponent }}</td>
                        </tr>
                        <tr>
                            <th scope="row">Fouls</th>
                            <td>{{ article.match_report.fouls_burnley }}</td>
                            <td>{{ article.match_report.fouls_opponent }}</td>
                        </tr>
                        </tbody>
                    </table>

                    <p><b>Officials</b>: {{ article.match_report.officials }}</p>

                <!-- Player Profile -->
                {% elif article.category.title == "Player Profile" %}

                    <hr>
                    <div class="row">
                        <div class="col">
                            <img src="{{ article.thumbnail.url }}" class="player-profile-image" alt="{{ article.title }} Thumbnail">
                        </div>
                        <div class="col">
                            <p>{{ article.player_profile.name }}</p>
                        </div>
                    </div>

                    <p>{{ article.body | safe }}</p>
                    <hr>

                    <p>PLAYER PROFILE</p>
                    <p>{{ article.player_profile.dob }}</p>
                    <p>{{ article.player_profile.nationality }}</p>
                    <p>{{ article.player_profile.stats | safe }}</p>

                <!-- General News -->
                {% else %}
                    <hr>
                    <p>{{ article.body | safe }}</p>
                {% endif %}
            </div>
        </div>
        <!-- Right Column -->
        <div class="col-3 mobile-hide">
        </div>
    </div>
</div>

{% endblock %}